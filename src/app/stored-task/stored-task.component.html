<div class="p-6 bg-white border border-gray-300 rounded-lg shadow-lg w-full flex-grow transition duration-300 hover:shadow-xl transform hover:-translate-y-1 relative">
  <!-- Contenuto della card -->
  <div *ngIf="!isEditing">
    <h5 class="text-2xl font-bold mb-3 text-gray-900">{{ storedTask.name }}</h5>
    <p class="text-gray-700 mb-4">{{ storedTask.description }}</p>
    <small class="text-gray-500 italic">Frequenza: {{ storedTask.frequency }}</small>
  </div>

  <div *ngIf="isEditing" class="space-y-4">
    <input 
      [(ngModel)]="storedTask.name" 
      placeholder="Nome" 
      class="w-full p-3 border border-gray-300 rounded-lg text-gray-900 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"
    />
    <textarea 
      [(ngModel)]="storedTask.description" 
      placeholder="Descrizione" 
      class="w-full p-3 border border-gray-300 rounded-lg text-gray-900 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"
    ></textarea>
    <select 
      [(ngModel)]="storedTask.frequency" 
      class="w-full p-3 border border-gray-300 rounded-lg text-gray-900 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"
    >
      <option value="SETTIMANALE">SETTIMANALE</option>
      <option value="BISETTIMANALE">BISETTIMANALE</option>
      <option value="MENSILE">MENSILE</option>
    </select>
  </div>

  <!-- Pulsanti -->
  <div class="mt-6 flex justify-end space-x-4 relative">
    <button *ngIf="!isEditing" class="p-3 rounded-lg bg-[#003f5ce6] text-white hover:bg-[#003f5c] transition-colors duration-200" (click)="onEdit()">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3">
        <path d="M12 20h9"></path>
        <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
      </svg>
    </button>

    <button *ngIf="isEditing" class="p-3 rounded-lg bg-green-500 text-white hover:bg-green-600 transition-colors duration-200" (click)="onUpdate()">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
    </button>
    
    <button *ngIf="isEditing" class="p-3 rounded-lg bg-gray-500 text-white hover:bg-gray-600 transition-colors duration-200" (click)="onCancelEdit()">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
    </button>
    
    <button *ngIf="!isEditing" class="p-3 rounded-lg bg-[#FF6E54] text-white hover:bg-red-600 transition-colors duration-200 relative" (click)="showPopOver = !showPopOver">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-delete">
        <path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path>
        <line x1="18" y1="9" x2="12" y2="15"></line>
        <line x1="12" y1="9" x2="18" y2="15"></line>
      </svg>
    </button>
    
    <!-- Popover di Conferma Eliminazione -->
    <div *ngIf="showPopOver" class="absolute bottom-full mb-2 right-0 bg-white p-4 border border-gray-300 rounded-lg shadow-lg z-50">
      <p class="text-gray-900 mb-4">Sei sicuro di voler eliminare questa task?</p>
      <div class="flex justify-end space-x-2">
        <button class="p-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors duration-200" (click)="confirmDelete()">Conferma</button>
        <button class="p-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors duration-200" (click)="showPopOver = false">Annulla</button>
      </div>
    </div>
  </div>
</div>
