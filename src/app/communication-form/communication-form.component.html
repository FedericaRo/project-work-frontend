<div class="container">
  <div class="form-wrapper">
    <h2 class="text-2xl font-medium mb-4">Aggiungi una nuova comunicazione</h2>
    <form [formGroup]="communicationForm" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="fill" class="w-full mb-4">
        <mat-label>Titolo</mat-label>
        <input 
        placeholder="Inserire titolo"
        type="text"
        id="communicationName"
        formControlName="communicationName"
        matInput
        />
        <mat-error *ngIf="communicationForm.get('communicationName')?.invalid && communicationForm.get('communicationName')?.touched">
                Il titolo è obbligatorio
        </mat-error>
      </mat-form-field>
     
    
      <div class="mb-4 flex space-x-4">
        <div class="w-1/2">
          <mat-form-field appearance="fill" class="w-full">
            <mat-label>Da</mat-label>
            <input 
              matInput
              id="fromPerson"
              formControlName="fromPerson"
              placeholder="Inserire mittente"
            />
            <mat-error *ngIf="communicationForm.get('fromPerson')?.invalid && communicationForm.get('fromPerson')?.touched">
              Il campo "Da" è obbligatorio
            </mat-error>
          </mat-form-field>
        </div>

        <div class="w-1/2">
          <mat-form-field appearance="fill" class="w-full">
            <mat-label>Per</mat-label>
            <input 
              matInput
              id="toPerson"
              formControlName="toPerson"
              placeholder="Inserire destinatario"
            />
            <mat-error *ngIf="communicationForm.get('toPerson')?.invalid && communicationForm.get('toPerson')?.touched">
              Il campo "Per" è obbligatorio
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <mat-form-field appearance="fill" class="w-full mb-4">
        <mat-label>Tipologia</mat-label>
        <mat-select formControlName="type">
          <mat-option value="">Seleziona tipologia</mat-option>
          <mat-option value="ORGANIZZATIVA">ORGANIZZATIVA</mat-option>
          <mat-option value="AMMINISTRATIVA">AMMINISTRATIVA</mat-option>
          <mat-option value="INFORMATIVA">INFORMATIVA</mat-option>
          <mat-option value="CAMBIOTURNO">CAMBIO TURNO</mat-option>
        </mat-select>
        <mat-error *ngIf="communicationForm.get('type')?.invalid && communicationForm.get('type')?.touched">
          Il campo "Tipologia" è obbligatorio
        </mat-error>
      </mat-form-field>


     
  <mat-label>Scegli grado di importanza</mat-label>
  <mat-radio-group formControlName="importance" aria-label="Select an importance level">
    <mat-radio-button value="ALTA">ALTA</mat-radio-button>
    <mat-radio-button value="MEDIA">MEDIA</mat-radio-button>
    <mat-radio-button value="BASSA">BASSA</mat-radio-button>
  </mat-radio-group>
  <mat-error *ngIf="communicationForm.get('importance')?.invalid && communicationForm.get('importance')?.touched">
    Il campo "Importanza" è obbligatorio
  </mat-error>



      <mat-form-field appearance="fill" class="w-full mb-4 descrizione">
        <mat-label>Descrizione</mat-label>
        <textarea 
          matInput
          id="message"
          formControlName="description"
          placeholder="Descrivi la comunicazione"
          rows="5"
        ></textarea>
        <mat-error *ngIf="communicationForm.get('description')?.invalid && communicationForm.get('description')?.touched">
          Il campo "Descrizione" è obbligatorio
        </mat-error>
      </mat-form-field>

        <!-- <div class="mb-4">
          <label for="pdf" class="block text-sm font-medium text-gray-700">Aggiungi un PDF</label>
          <div class="mt-1 relative rounded-md shadow-sm">
            <input 
              #fileInput
              id="pdf"
              type="file" 
              (change)="onFileSelected($event)" 
              class="block w-full px-3 py-2 placeholder-gray-400 text-gray-900 rounded-md border border-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
            />
          </div>
        </div>

        
<label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" for="file_input">Upload file</label>
<input #fileInput
      (change)="onFileSelected($event)" 
      class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400" aria-describedby="file_input_help" id="file_input" type="file">
<p class="mt-1 text-sm text-gray-500 dark:text-gray-300" id="file_input_help">SVG, PNG, JPG or GIF (MAX. 800x400px).</p> -->

<div class="mb-3">
  <label
    for="formFile"
    class="mb-2 inline-block font-medium  text-gray-900 dark:text-neutral-400 "
    >Aggiungi un file pdf</label
  >
  <input
  #fileInput
      (change)="onFileSelected($event)" 
    class="relative m-0 block w-full min-w-0 flex-auto cursor-pointer rounded border border-solid border-secondary-500 bg-transparent bg-clip-padding px-3 py-[0.32rem] text-base font-normal text-surface transition duration-300 ease-in-out file:-mx-3 file:-my-[0.32rem] file:me-3 file:cursor-pointer file:overflow-hidden file:rounded-none file:border-0 file:border-e file:border-solid file:border-inherit file:bg-transparent file:px-3  file:py-[0.32rem] file:text-surface focus:border-primary focus:text-gray-700 focus:shadow-inset focus:outline-none dark:border-white/70 dark:text-white  file:dark:text-white"
    type="file"
    id="formFile" />
    <p class="mt-1 text-sm text-gray-500 dark:text-gray-300" id="file_input_help">PDF (MAX. 5MB).</p>

</div>

      <div>
        <button
        [disabled]="communicationForm.invalid"
          mat-raised-button 
          color="primary" 
          type="submit" 
        >
          Aggiungi
        </button>
      </div>
    </form>
  </div>
</div>
